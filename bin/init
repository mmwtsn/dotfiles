#!/usr/bin/env bash

# Change the default macOS shell to bash
chsh -s /bin/bash

# Manually create a .bash_profile so it is not synced
cat << EOF >> ~/.bash_profile
# Source primary bash configuration from synced ~/.bashrc file
if [ -f "~/.bashrc" ]; then source ~/.bashrc; fi

# macOS setup
export BASH_SILENCE_DEPRECATION_WARNING=1
EOF

# Install and setup Homebrew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

brew tap thoughtbot/formulae

brew install \
  ag \
  awscli \
  gnupg \
  make \
  git \
  gitsh \
  go \
  jq \
  rcm \
  tmux \
  tree \

# Setup dotfiles
./bin/link

# Source dotfiles
. $HOME/.bashrc

# Set up Terminal.app
open ./mmwtsn.terminal

# Setup Vim
vim +PluginInstall +qall

git -C $HOME/.vim/bundle/YouCompleteMe submodule update --init --recursive
$HOME/.vim/bundle/YouCompleteMe/install.py --gocode-completer

# Setup patched fonts for Powerline
git clone https://github.com/powerline/fonts.git
cd fonts
mv SourceCodePro Source\ Code\ Pro
./install.sh 'Source Code Pro'
cd ..
rm -rf fonts
